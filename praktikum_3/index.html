<!DOCTYPE html>
<html>

<head>
    <title>Japip To-Do</title>
    <style>
        body {
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
            background-color: lightgray;
            font-family: sans-serif;
        }

        .container {
            justify-content: center;
            background-color: white;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
            width: 450px;
            margin: 0 auto;
            padding: 20px;
            border-radius: 25px;
        }

        input[type="text"] {
            padding: 8px 12px;
            width: 100%;
            font-size: medium;
            border: 1px solid white;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
            box-sizing: border-box;
        }

        input[type="checkbox"] {
            width: 50px
        }

        .input_container {
            width: 100%;
            display: flex;
            gap: 5px;
        }

        .input_container>input[type="text"] {
            padding: 15px 20px;
            border: none;
        }

        .input_container>button {
            width: 25%;
        }

        .task_container {
            width: 100%;
            padding: 0;
        }

        .task_container>li {
            background-color: white;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
            display: flex;
            gap: 5px;
        }

        .task_btn {
            padding: 10px;
            font-size: large;
            text-align: center;
            cursor: pointer;
        }

        .header_container {
            display: flex;
            width: 100%;
            font-size: 25px;
            text-align: center;
            margin: 0 0 35px 0;
            padding: 0;
            justify-content: space-between;
        }

        h2,
        p {
            margin: 0;
        }

        li {
            list-style-type: none;
        }

        /* FONT FAMILY */
        .a{ font-family: 'Courier New', Courier, monospace; }
        .b{ font-family: sans-serif }
        .c{ font-family: Arial, Helvetica, sans-serif}
        .d{ font-family: Georgia, 'Times New Roman', Times, serif}
        .e{ font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif}
        .f{ font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif}
        .g{ font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif}

        .input_container
        {
            border-radius: 50px;
        }
        .btninput
        {
            border: none;
            border-radius: 50px;
            display: flex;
            padding: 0 50px;
            justify-content: center;
            align-items: center;
        }
        .akbartukam 
        {
            border: 1px;
            padding: 5px;
            height: 45px;
            width: 125px;
            border-radius: 25px;
            background-color: #eeeeee;
            color: black;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

    </style>
</head>

<body id="badan">
    <div id="ctr" class="container">
        <div class="header_container">
            <h2 class="a" id="huruf">To-Do List</h2>
            <p>⚙️</p>
        </div>

        <!-- Todo Editor -->
        <div class="todo_container">
            <!-- Input -->
            <div class="input_container">
                <input class="input_container" type="text" id="newTask" placeholder="Add a new task...">
                <button class="btninput" id="huruf" onclick="addTask()">ADD</button>
            </div>

            <!-- Task List -->
            <ul class="task_container" id="taskList"></ul>
        </div>

        <!-- Setting Editor -->
        <h2 class="a" id="huruf">Settings Idk</h2>
         <div class="setting_container">
            <div style="margin-bottom: 5px;" class="header_container">
                <p style="font-size: medium;" class="a">Change Font Size</p>
                <input class="akbartukam" type="range" min="12" max="120" id="fontsize">
            </div>
            <div style="margin-bottom: 5px;" class="header_container">
                <p style="font-size: medium;" class="a">Change Background Color</p>
                <input class="akbartukam" type="color" id="warna_badan">
            </div>
            <div style="margin-bottom: 5px;" class="header_container">
                <p style="font-size: medium;" class="a">Change Theme</p>
                <input class="akbartukam" type="button" id="theme" value="Light">
            </div>
            <div style="margin-bottom: 5px;" class="header_container">
                <p style="font-size: medium;" class="a">Change Font Family</p>
                <input class="akbartukam" type="button" id="font" value="Font Family">
            </div>
         </div>
    </div>

</body>

</html>

<script>
    const taskList = document.getElementById("taskList");
    const newTaskInput = document.getElementById("newTask");
    const badan = document.getElementById("badan")

    var warna = document.getElementById("warna_badan")
    var fontsize = document.getElementById("fontsize")
    var huruf = document.getElementById("huruf")
    var theme = document.getElementById("theme")
    var container = document.getElementById("ctr")
    var font = document.getElementById("font")

    font.addEventListener("click", () => 
    {
        var list = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
        var currentClass = huruf.className;
        var newClass = list[Math.floor(Math.random() * list.length)];
        
        // Replace the font class for all elements within the container
        document.querySelectorAll('#ctr *').forEach(el => {
            el.classList.replace(currentClass, newClass);
        });

        // Update the class for the current reference as well
        huruf.className = newClass;
        console.log(newClass);
    });


    theme.addEventListener("click", () => {
    if (theme.value === "Light") {
        theme.value = "Dark";
        container.style.color = "white";
        container.style.backgroundColor = "black";

        document.querySelectorAll('input[type="text"], .btninput, .akbartukam').forEach((el) => {
            el.style.backgroundColor = "#333";
            el.style.color = "white";
            el.style.borderColor = "#777";
        });

        document.querySelectorAll('.input_container, .task_container > li, .task_btn, input[type="checkbox"]').forEach((el) => {
            el.style.backgroundColor = "#444";
            el.style.color = "white";
            el.style.borderColor = "#777";
        });
    } else {
        theme.value = "Light";
        container.style.color = "black";
        container.style.backgroundColor = "white";

        document.querySelectorAll('input[type="text"], .btninput, .akbartukam').forEach((el) => {
            el.style.backgroundColor = "#eeeeee";
            el.style.color = "black";
            el.style.borderColor = "black";
        });

        document.querySelectorAll('.input_container, .task_container > li, .task_btn, input[type="checkbox"]').forEach((el) => {
            el.style.backgroundColor = "white";
            el.style.color = "black";
            el.style.borderColor = "black";
        });
    }
});

    fontsize.addEventListener("input", () => {
    const elements = document.querySelectorAll('#ctr *'); // Select all elements inside the container
    elements.forEach(el => {
        el.style.fontSize = fontsize.value + "px"; // Apply the font size to each element
        });
    });

    warna.addEventListener("input", () =>
    {
        badan.style.backgroundColor = warna.value
    })

    // Fungsi untuk mengambil data dari Local Storage
    function getTasks() 
    {
        const tasks = localStorage.getItem("tasks");
        return tasks ? JSON.parse(tasks) : [];
    }

    // Fungsi untuk menyimpan data ke Local Storage
    function saveTasks(tasks) 
    {
        localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    // Fungsi untuk menambah tugas baru
    function addTask() 
    {
        const taskText = newTaskInput.value.trim();
        if (taskText === "") 
        {
            alert("Task tidak boleh kosong");
            return;
        }

        const tasks = getTasks();
        tasks.push(
            { 
                text: taskText, 
                completed: false 
            });
        saveTasks(tasks);
        newTaskInput.value = "";
        displayTasks();
    }

    // Fungsi untuk menampilkan tugas di halaman
    function displayTasks() 
    {
        const tasks = getTasks();
        taskList.innerHTML = ""; // Kosongkan list sebelum diisi ulang

        tasks.forEach((task, index) => 
        {
            const li = document.createElement("li");
            li.className = "task_item";

            // Menambahkan elemen HTML dengan innerHTML
            li.innerHTML = `
                <input id="huruf" type="checkbox" ${task.completed ? "checked" : ""} onclick="toggleTaskCompletion(${index})">
                <input id="huruf" type="text" value="${task.text}" disabled ondblclick="editTask(this, ${index})">
                <div class="task_btn" onclick="enableEditTask(this, ${index})">✏️</div>
                <div class="task_btn" onclick="deleteTask(${index})">❌</div>
            `;

            // Coret teks jika tugas selesai
            if (task.completed) 
            {
                li.querySelector('input[type="text"]').style.textDecoration = "line-through";
            }

            taskList.appendChild(li);
        });
    }

    // Fungsi untuk menghapus tugas
    function deleteTask(index) 
    {
        const tasks = getTasks();
        tasks.splice(index, 1);
        saveTasks(tasks);
        displayTasks();
    }

    // Fungsi untuk mengubah status selesai/tidak selesai
    function toggleTaskCompletion(index) 
    {
        const tasks = getTasks();
        tasks[index].completed = !tasks[index].completed;
        saveTasks(tasks);
        displayTasks();
    }

    // Fungsi untuk mengaktifkan mode edit
    function enableEditTask(element, index) 
    {
        const textInput = element.previousElementSibling;
        textInput.disabled = false;
        textInput.focus();
    }

    // Fungsi untuk menyimpan tugas yang diedit
    function editTask(inputElement, index) 
    {
        const tasks = getTasks();
        tasks[index].text = inputElement.value.trim();
        saveTasks(tasks);
        displayTasks();
    }

    // Panggil fungsi displayTasks saat halaman pertama kali dimuat
    displayTasks();
</script>
